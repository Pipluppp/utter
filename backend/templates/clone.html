{% extends "base.html" %}

{% block title %}Clone Voice - Utter{% endblock %}

{% block content %}
<h1 class="title-page">Clone Your Voice</h1>

<details class="page-guide">
    <summary>
        <span>ℹ️ Tips for Best Results</span>
        <span class="page-guide-chevron">▼</span>
    </summary>
    <div class="page-guide-content">
        <ul>
            <li><strong>Audio length:</strong> 3 seconds minimum — even short clips clone remarkably well! For best
                results, 10–30 seconds is optimal (max 60s)</li>
            <li><strong>Quality:</strong> Clear audio with minimal background noise works best</li>
            <li><strong>Transcript:</strong> Accurate transcript significantly improves voice matching</li>
            <li><strong>Processing time:</strong> 10–30 seconds typically</li>
        </ul>
        <p><strong>Supported formats:</strong> WAV, MP3, M4A (max 50MB)</p>
    </div>
</details>

<form id="clone-form">
    <div id="error-container" class="message hidden"></div>

    <div style="text-align: right; margin-bottom: 1rem;">
        <button type="button" class="btn btn-secondary btn-sm" id="try-example-btn">
            Try Example Voice
        </button>
    </div>

    <div class="form-group">
        <div class="dropzone" id="dropzone">
            <div class="dropzone-icon">↑</div>
            <div class="dropzone-text">
                <strong>Drop audio file here</strong> or click to browse
            </div>
            <div class="dropzone-hint">WAV, MP3, M4A • 3 seconds to 5 minutes</div>
            <div class="dropzone-file-info hidden" id="file-info"></div>
        </div>
        <input type="file" id="audio-input" accept=".wav,.mp3,.m4a,audio/wav,audio/mpeg,audio/mp4" hidden>
    </div>

    <div class="form-group">
        <label class="input-label" for="voice-name">Voice Name</label>
        <input type="text" class="input" id="voice-name" name="name" placeholder="My Custom Voice" maxlength="100"
            required>
    </div>

    <div class="form-group">
        <label class="input-label" for="transcript">Reference Transcript</label>
        <textarea class="textarea" id="transcript" name="transcript"
            placeholder="Type or paste what is being said in the audio file. This helps the model learn the voice accurately."
            style="min-height: 100px;" required></textarea>
        <div class="char-counter" id="transcript-counter">0 chars</div>
    </div>

    <div class="form-group">
        <label class="input-label" for="language-select">Language</label>
        <select class="select" id="language-select" name="language">
            <option value="Auto" selected>Auto-detect</option>
            <option value="English">English</option>
            <option value="Chinese">Chinese</option>
            <option value="Japanese">Japanese</option>
            <option value="Korean">Korean</option>
            <option value="German">German</option>
            <option value="French">French</option>
            <option value="Russian">Russian</option>
            <option value="Portuguese">Portuguese</option>
            <option value="Spanish">Spanish</option>
            <option value="Italian">Italian</option>
        </select>
    </div>

    <button type="submit" class="btn btn-block" id="submit-btn">
        Create Voice Clone
    </button>
</form>

<!-- Clone Progress (shown during cloning) -->
<div class="generation-progress hidden" id="clone-progress">
    <div class="progress-spinner"></div>
    <div class="progress-info">
        <div class="progress-title">Creating voice clone...</div>
        <div class="progress-time">
            <span class="progress-elapsed" id="clone-elapsed">0:00</span>
            <span class="progress-elapsed-label">elapsed</span>
        </div>
        <div class="progress-hint">This typically takes 10–30 seconds</div>
    </div>
</div>
{% endblock %}