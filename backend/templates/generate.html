{% extends "base.html" %}

{% block title %}Generate Speech - Utter{% endblock %}

{% block content %}
<h1 class="title-page">Generate Speech</h1>

<form id="generate-form">
    <div id="error-container" class="message hidden"></div>

    <div class="form-group">
        <label class="input-label" for="voice-select">Voice</label>
        <select class="select" id="voice-select" required>
            <option value="">Select a voice...</option>
        </select>
    </div>

    <div class="form-group">
        <label class="input-label" for="text-input">Text</label>
        <textarea class="textarea" id="text-input" placeholder="Enter text to speak... Long text is OK, it will be automatically split into chunks." maxlength="5000"
            required></textarea>
        <div class="char-counter" id="char-counter">0 / 5000</div>
        <div class="chunk-info hidden" id="chunk-info"></div>
    </div>

    <div class="message">
        Tips: Use commas for pauses. End sentences with periods. Long text will be split and generated in chunks.
    </div>

    <button type="submit" class="btn btn-block" id="generate-btn">
        Generate Speech
    </button>
</form>

<div class="result-section hidden" id="result-section">
    <div class="divider"></div>

    <div class="audio-player" id="audio-player">
        <button type="button" class="audio-player-btn" id="play-btn">
            <svg id="play-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M4 2l10 6-10 6V2z" />
            </svg>
            <svg id="pause-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor" class="hidden">
                <path d="M3 2h4v12H3V2zm6 0h4v12H9V2z" />
            </svg>
        </button>

        <div id="waveform" class="audio-player-waveform"></div>

        <div class="audio-player-time" id="time-display">0:00 / 0:00</div>

        <div class="audio-player-download">
            <a href="#" class="btn btn-secondary" id="download-btn" download="speech.mp3">
                Download
            </a>
        </div>
    </div>

    <audio id="audio-element" hidden></audio>
</div>


{% endblock %}